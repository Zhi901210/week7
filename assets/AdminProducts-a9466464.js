import{M as $,P as T}from"./PaginationComponents-79135301.js";import{_ as P,o as i,c as a,d as t,a as v,t as _,h as n,j as d,F as x,f as M,g as f,k,r as h,b}from"./index-ffdd9d06.js";const{VITE_APP_URL:U,VITE_APP_PATH:C}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"qqq-api",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0},I={props:["copyproducts"],data(){return{modal:""}},methods:{getdata(){this.$http.get(`${U}/v2/api/${C}/admin/products`).then(l=>{this.products=l.data.products}).catch(l=>{console.log(l)})},delproduct(){this.$http.delete(`${U}/v2/api/${C}/admin/product/${this.copyproducts.id}`).then(l=>{this.modal.hide(),this.getdata()}).catch(l=>{console.log(l)})}},mounted(){this.modal=new $(this.$refs.delProductModal)}},L={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},R={class:"modal-dialog"},q={class:"modal-content border-0"},H=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body"},O={class:"text-danger"},B={class:"modal-footer"},N=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function S(l,o,r,g,e,c){return i(),a("div",L,[t("div",R,[t("div",q,[H,t("div",F,[v(" 是否刪除 "),t("strong",O,_(r.copyproducts.title),1),v(" 商品(刪除後將無法恢復)。 ")]),t("div",B,[N,t("button",{type:"button",class:"btn btn-danger",onClick:o[0]||(o[0]=s=>c.delproduct(l.item))}," 確認刪除 ")])])])],512)}const j=P(I,[["render",S]]),{VITE_APP_URL:y,VITE_APP_PATH:w}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"qqq-api",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0},z={props:["copyproducts"],data(){return{productModal:"",newCopyproducts:[]}},methods:{getdata(){this.$http.get(`${y}/v2/api/${w}/admin/products`).then(l=>{this.products=l.data.products,console.log("從新抓資料")}).catch(l=>{console.log(l)})},upProduct(){this.$http.put(`${y}/v2/api/${w}/admin/product/${this.newCopyproducts.id}`,{data:this.newCopyproducts}).then(l=>{this.productModal.hide(),this.getdata()}).catch(l=>{console.log(l)})},uploadFile(){const l=this.$refs.fileInput.files[0],o=new FormData;o.append("file-to-upload",l),this.$http.post(`${y}/v2/api/${w}/admin/upload`,o,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{this.newCopyproducts.imageUrl=r.data.imageUrl,this.$refs.fileInput.value=""}).catch(r=>{this.$httpMessageState(r.response,"圖片失敗")})}},watch:{copyproducts:function(l){this.newCopyproducts=l}},mounted(){this.productModal=new $(this.$refs.productModal)}},G={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},J={class:"modal-dialog modal-xl"},K={class:"modal-content border-0"},Q=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"編輯產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),W={class:"modal-body"},X={class:"row"},Y={class:"col-sm-4"},Z={class:"mb-2"},tt={class:"mb-3"},ot=t("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),et={class:"mb-3"},st=t("label",{for:"customFile",class:"form-label"},[v("或 上傳圖片 "),t("i",{class:"fas fa-spinner fa-spin"})],-1),lt=["src"],nt={key:0,class:"mt-5"},dt=["onUpdate:modelValue"],it=["src"],at=["onClick"],ct={key:0},rt={key:0},pt={class:"col-sm-8"},ut={class:"mb-3"},_t=t("label",{for:"title",class:"form-label"},"標題",-1),mt={class:"row"},ht={class:"mb-3 col-md-6"},bt=t("label",{for:"category",class:"form-label"},"分類",-1),ft={class:"mb-3 col-md-6"},Pt=t("label",{for:"price",class:"form-label"},"單位",-1),gt={class:"row"},yt={class:"mb-3 col-md-6"},wt=t("label",{for:"origin_price",class:"form-label"},"原價",-1),vt={class:"mb-3 col-md-6"},$t=t("label",{for:"price",class:"form-label"},"售價",-1),Ut=t("hr",null,null,-1),Ct={class:"mb-3"},Vt=t("label",{for:"description",class:"form-label"},"產品描述",-1),Dt={class:"mb-3"},xt=t("label",{for:"content",class:"form-label"},"說明內容",-1),Mt={class:"mb-3"},kt={class:"form-check"},At=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Et={class:"modal-footer"},Tt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function It(l,o,r,g,e,c){return i(),a("div",G,[t("div",J,[t("div",K,[Q,t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[ot,n(t("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":o[0]||(o[0]=s=>e.newCopyproducts.imageUrl=s)},null,512),[[d,e.newCopyproducts.imageUrl]])]),t("div",et,[st,t("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:o[1]||(o[1]=(...s)=>c.uploadFile&&c.uploadFile(...s))},null,544)]),t("img",{class:"img-fluid",src:e.newCopyproducts.imageUrl},null,8,lt),e.newCopyproducts.imagesUrl?(i(),a("div",nt,[(i(!0),a(x,null,M(e.newCopyproducts.imagesUrl,(s,u)=>(i(),a("div",{class:"mb-3",key:u},[n(t("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":m=>e.newCopyproducts.imagesUrl[u]=m,placeholder:"請輸入連結"},null,8,dt),[[d,e.newCopyproducts.imagesUrl[u]]]),t("div",null,[t("img",{class:"img-fluid",src:s},null,8,it)]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:m=>e.newCopyproducts.imagesUrl.splice(u,1)}," 移除 ",8,at)]))),128)),e.newCopyproducts.imagesUrl[e.newCopyproducts.imagesUrl.length-1]||!e.newCopyproducts.imagesUrl.length?(i(),a("div",ct,[t("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:o[2]||(o[2]=s=>e.newCopyproducts.imagesUrl.push(""))}," 新增圖片 ")])):f("",!0)])):f("",!0)]),e.newCopyproducts.imagesUrl?f("",!0):(i(),a("div",rt,[t("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:o[3]||(o[3]=s=>e.newCopyproducts.imageUrl=[])}," 刪除圖片 ")]))]),t("div",pt,[t("div",ut,[_t,n(t("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":o[4]||(o[4]=s=>e.newCopyproducts.title=s)},null,512),[[d,e.newCopyproducts.title]])]),t("div",mt,[t("div",ht,[bt,n(t("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":o[5]||(o[5]=s=>e.newCopyproducts.category=s)},null,512),[[d,e.newCopyproducts.category]])]),t("div",ft,[Pt,n(t("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":o[6]||(o[6]=s=>e.newCopyproducts.unit=s)},null,512),[[d,e.newCopyproducts.unit]])])]),t("div",gt,[t("div",yt,[wt,n(t("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":o[7]||(o[7]=s=>e.newCopyproducts.origin_price=s)},null,512),[[d,e.newCopyproducts.origin_price]])]),t("div",vt,[$t,n(t("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":o[8]||(o[8]=s=>e.newCopyproducts.price=s)},null,512),[[d,e.newCopyproducts.price]])])]),Ut,t("div",Ct,[Vt,n(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":o[9]||(o[9]=s=>e.newCopyproducts.description=s)},`\r
                `,512),[[d,e.newCopyproducts.description]])]),t("div",Dt,[xt,n(t("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":o[10]||(o[10]=s=>e.newCopyproducts.content=s)},`\r
                `,512),[[d,e.newCopyproducts.content]])]),t("div",Mt,[t("div",kt,[n(t("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":o[11]||(o[11]=s=>e.newCopyproducts.is_enabled=s)},null,512),[[k,e.newCopyproducts.is_enabled]]),At])])])])]),t("div",Et,[Tt,t("button",{type:"button",class:"btn btn-primary",onClick:o[12]||(o[12]=s=>c.upProduct())}," 確認編輯 ")])])])],512)}const Lt=P(z,[["render",It]]),{VITE_APP_URL:V,VITE_APP_PATH:D}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"qqq-api",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0},Rt={data(){return{modnewProductModall:"",newProductData:[],postNewProductData:[]}},methods:{getdata(){this.$http.get(`${V}/v2/api/${D}/admin/products`).then(l=>{this.products=l.data.products}).catch(l=>{console.log(l)})},newProduct(){this.postNewProductData={...this.newProductData},this.$http.post(`${V}/v2/api/${D}/admin/product`,{data:this.postNewProductData}).then(l=>{this.newProductModal.hide(),this.newProductData=[],this.getdata()}).catch(l=>{console.log(l)})}},mounted(){this.newProductModal=new $(this.$refs.newProductModal)}},qt={id:"newProductModal",ref:"newProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"newProductModal","aria-hidden":"true"},Ht={class:"modal-dialog modal-xl"},Ft={class:"modal-content border-0"},Ot=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"新增產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Bt={class:"modal-body"},Nt={class:"row"},St={class:"col-sm-4"},jt={class:"mb-2"},zt={class:"mb-3"},Gt=t("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),Jt=["src"],Kt={key:0},Qt={class:"col-sm-8"},Wt={class:"mb-3"},Xt=t("label",{for:"title",class:"form-label"},"標題",-1),Yt={class:"row"},Zt={class:"mb-3 col-md-6"},to=t("label",{for:"category",class:"form-label"},"分類",-1),oo={class:"mb-3 col-md-6"},eo=t("label",{for:"price",class:"form-label"},"單位",-1),so={class:"row"},lo={class:"mb-3 col-md-6"},no=t("label",{for:"origin_price",class:"form-label"},"原價",-1),io={class:"mb-3 col-md-6"},ao=t("label",{for:"price",class:"form-label"},"售價",-1),co=t("hr",null,null,-1),ro={class:"mb-3"},po=t("label",{for:"description",class:"form-label"},"產品描述",-1),uo={class:"mb-3"},_o=t("label",{for:"content",class:"form-label"},"說明內容",-1),mo={class:"mb-3"},ho={class:"form-check"},bo=t("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),fo={class:"modal-footer"},Po=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function go(l,o,r,g,e,c){return i(),a("div",qt,[t("div",Ht,[t("div",Ft,[Ot,t("div",Bt,[t("div",Nt,[t("div",St,[t("div",jt,[t("div",zt,[Gt,n(t("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":o[0]||(o[0]=s=>e.newProductData.imageUrl=s)},null,512),[[d,e.newProductData.imageUrl]])]),t("img",{class:"img-fluid",src:e.newProductData.imageUrl,alt:""},null,8,Jt)]),e.newProductData.imagesUrl?f("",!0):(i(),a("div",Kt,[t("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:o[1]||(o[1]=s=>e.newProductData.imageUrl=[])}," 刪除圖片 ")]))]),t("div",Qt,[t("div",Wt,[Xt,n(t("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":o[2]||(o[2]=s=>e.newProductData.title=s)},null,512),[[d,e.newProductData.title]])]),t("div",Yt,[t("div",Zt,[to,n(t("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":o[3]||(o[3]=s=>e.newProductData.category=s)},null,512),[[d,e.newProductData.category]])]),t("div",oo,[eo,n(t("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":o[4]||(o[4]=s=>e.newProductData.unit=s)},null,512),[[d,e.newProductData.unit]])])]),t("div",so,[t("div",lo,[no,n(t("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":o[5]||(o[5]=s=>e.newProductData.origin_price=s)},null,512),[[d,e.newProductData.origin_price]])]),t("div",io,[ao,n(t("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":o[6]||(o[6]=s=>e.newProductData.price=s)},null,512),[[d,e.newProductData.price]])])]),co,t("div",ro,[po,n(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":o[7]||(o[7]=s=>e.newProductData.description=s)},`\r
                `,512),[[d,e.newProductData.description]])]),t("div",uo,[_o,n(t("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":o[8]||(o[8]=s=>e.newProductData.content=s)},`\r
                `,512),[[d,e.newProductData.content]])]),t("div",mo,[t("div",ho,[n(t("input",{id:"is_enabled","onUpdate:modelValue":o[9]||(o[9]=s=>e.newProductData.is_enabled=s),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[k,e.newProductData.is_enabled]]),bo])])])])]),t("div",fo,[Po,t("button",{type:"button",class:"btn btn-primary",onClick:o[10]||(o[10]=s=>c.newProduct())}," 確認新增 ")])])])],512)}const yo=P(Rt,[["render",go]]),{VITE_APP_URL:wo,VITE_APP_PATH:vo}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"qqq-api",BASE_URL:"/week7/",MODE:"production",DEV:!1,PROD:!0},$o={data(){return{usedata:{username:" ",password:""},products:[],copyproducts:[],newproducts:[],img:!1,upbtn:!1,currentPage:1,pagination:{}}},components:{delproductpmodal:j,productmodal:Lt,newProductModal:yo,Pagination:T},methods:{getdata(l=1){this.$http.get(`${wo}/v2/api/${vo}/admin/products?page=${l}`).then(o=>{this.products=o.data.products,this.pagination=o.data.pagination}).catch(o=>{console.log(o)})},del(l){this.copyproducts={...l}},upDa(l){this.img=!0,this.upbtn=!0,this.copyproducts={...l}}},mounted(){this.getdata()}},Uo={class:"container"},Co=t("h1",null,"這是後台產品列頁面",-1),Vo=t("div",{class:"text-end mt-4"},[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#newProductModal","aria-labelledby":"newProductModal","aria-hidden":"true"}," 建立新的產品 ")],-1),Do={class:"table mt-4"},xo=t("thead",null,[t("tr",null,[t("th",{width:"120"}," 分類 "),t("th",{width:"120"},"產品名稱"),t("th",{width:"80"}," 原價 "),t("th",{width:"80"}," 售價 "),t("th",{width:"120"}," 是否啟用 "),t("th",{width:"120"}," 編輯 ")])],-1),Mo={class:"text-end"},ko={class:"text-end"},Ao={key:0,class:"text-success"},Eo={key:1},To={class:"btn-group"},Io=["onClick"],Lo=["onClick"];function Ro(l,o,r,g,e,c){const s=h("newProductModal"),u=h("productmodal"),m=h("delproductpmodal"),A=h("Pagination");return i(),a("div",Uo,[Co,Vo,t("table",Do,[xo,t("tbody",null,[(i(!0),a(x,null,M(e.products,p=>(i(),a("tr",{key:p.id},[t("td",null,_(p.category),1),t("td",null,_(p.title),1),t("td",Mo,_(p.origin_price),1),t("td",ko,_(p.price),1),t("td",null,[p.is_enabled?(i(),a("span",Ao,"啟用")):(i(),a("span",Eo,"未啟用"))]),t("td",null,[t("div",To,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#productModal",onClick:E=>c.upDa(p)}," 編輯 ",8,Io),t("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#delProductModal",onClick:E=>c.del(p)},"刪除 ",8,Lo)])])]))),128))])]),b(s,{ref:"newProductModal"},null,512),b(u,{ref:"productModal",copyproducts:e.copyproducts},null,8,["copyproducts"]),b(m,{ref:"delModal",copyproducts:e.copyproducts},null,8,["copyproducts"]),b(A,{pages:e.pagination,onEmitPages:l.getOrders},null,8,["pages","onEmitPages"])])}const Fo=P($o,[["render",Ro]]);export{Fo as default};
